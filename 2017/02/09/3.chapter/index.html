<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>컴포넌트를 이용한 애플리케이션 구축 &middot; NHN Ent. MIS 개발실</title>
        <meta name="description" content="Chapter3 컴포넌트를 이용한 애플리케이션 구축 속성 유효성 검사 컴포넌트 조합 전략과 모범 사례 컴포넌트 수명주기 컴포넌트의 특정 시점에 자동으로 호출될 메서드를 선언 컴포넌트가 생성/삭제 시점에 특정한 작업을 수행 성능최적화 차후 플럭스 아키텍처 컴포넌트 구성에 필수 수명주기 단계와 메서드 초기 컴포넌트 생성단계(마운팅) 상태와 속성 변경(속성/상태 변경) 트리거된 업데이트 컴포넌트 언마운트 단계(언마운팅) 마운팅 render 전 후에 함수 수행되며 전에 수행된 함수는 render를 trigger하지 않는다. render 후 에는 dom 이 완성되어 dom 에서 데이터를 가져 올 수 있다 언마운팅 언마운팅되기 직전에 호출.">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.16-DEV" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="컴포넌트를 이용한 애플리케이션 구축">
<meta property="og:description" content="Chapter3 컴포넌트를 이용한 애플리케이션 구축 속성 유효성 검사 컴포넌트 조합 전략과 모범 사례 컴포넌트 수명주기 컴포넌트의 특정 시점에 자동으로 호출될 메서드를 선언 컴포넌트가 생성/삭제 시점에 특정한 작업을 수행 성능최적화 차후 플럭스 아키텍처 컴포넌트 구성에 필수 수명주기 단계와 메서드 초기 컴포넌트 생성단계(마운팅) 상태와 속성 변경(속성/상태 변경) 트리거된 업데이트 컴포넌트 언마운트 단계(언마운팅) 마운팅 render 전 후에 함수 수행되며 전에 수행된 함수는 render를 trigger하지 않는다. render 후 에는 dom 이 완성되어 dom 에서 데이터를 가져 올 수 있다 언마운팅 언마운팅되기 직전에 호출.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ne-mis.github.io/study-react.js/2017/02/09/3.chapter/">
        <link rel="stylesheet" href="https://ne-mis.github.io/study-react.js/dist/styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        
    </head>
    <body>
        
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'XXX', 'auto');
ga('send', 'pageview');
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="React.js 스터디" href="https://ne-mis.github.io/study-react.js/">React.js 스터디</a>
                            </h1>
                        
                        <a class="button-square" href="https://ne-mis.github.io/study-react.js/index.xml"><i class="fa fa-rss"></i></a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/ne-mis">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:dl_mis@nhnent.com">
                                <i class="fa fa-envelope"></i>
                            </a>
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/study-react.js/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="Projects" href="/study-react.js/project/">Projects</a>
    </li>

    <li class="site-nav-item">
        <a title="Contact" href="/study-react.js/page/contact/">Contact</a>
    </li>

    <li class="site-nav-item">
        <a title="About" href="/study-react.js/about/">About</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">컴포넌트를 이용한 애플리케이션 구축</h1>
    
    <p class="post-date">
        <span>Published <time datetime="2017-02-09" itemprop="datePublished">Thu, Feb 9, 2017</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="" itemprop="url" rel="author">NHN Ent. MIS 개발실</a>
            </span>
        </span>
    </p>
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    

<h2 id="chapter3-컴포넌트를-이용한-애플리케이션-구축">Chapter3 컴포넌트를 이용한 애플리케이션 구축</h2>

<h3 id="속성-유효성-검사">속성 유효성 검사</h3>

<h3 id="컴포넌트-조합-전략과-모범-사례">컴포넌트 조합 전략과 모범 사례</h3>

<h3 id="컴포넌트-수명주기">컴포넌트 수명주기</h3>

<ul>
<li>컴포넌트의 특정 시점에 자동으로 호출될 메서드를 선언</li>
<li>컴포넌트가 생성/삭제 시점에 특정한 작업을 수행</li>
<li>성능최적화</li>
<li>차후 플럭스 아키텍처 컴포넌트 구성에 필수</li>
</ul>

<h3 id="수명주기-단계와-메서드">수명주기 단계와 메서드</h3>

<ul>
<li>초기 컴포넌트 생성단계(<strong><span style="color:#0052cc">마운팅</span></strong>)</li>
<li>상태와 속성 변경(<strong><span style="color:#0052cc">속성/상태 변경</span></strong>)</li>
<li>트리거된 업데이트</li>
<li>컴포넌트 언마운트 단계(<strong><span style="color:#0052cc">언마운팅</span></strong>)</li>
</ul>

<h4 id="마운팅">마운팅</h4>

<p><img src="https://nhnent.dooray.com/files/1885895623800724352" alt="새 파일 2017-02-05_2.jpg" /></p>

<p>render 전 후에 함수 수행되며 전에 수행된 함수는 render를 trigger하지 않는다.
render 후 에는 dom 이 완성되어 dom 에서 데이터를 가져 올 수 있다</p>

<h4 id="언마운팅">언마운팅</h4>

<p><img src="https://nhnent.dooray.com/files/1885896324855246535" alt="새 파일 2017-02-05_3.jpg" />
언마운팅되기 직전에 호출. 정리작업에 유용</p>

<h4 id="속성변경">속성변경</h4>

<p><img src="https://nhnent.dooray.com/files/1885896797475871207" alt="새 파일 2017-02-05_4.jpg" />
- componentWillReceiveProps: 컴포넌트가 새속성을 받는 함수. setState호출해도 추가 랜더링이 되지 않는다.
- shouldComponentUpdate: render를 생략가능하도록 설정할 수 있는 render 이전 함수. 성능 최적화에 유용한 함수.
- componentWillUpdate: render 직전 함수. 예정된 업데이트를 준비, setState사용 금지
- componentDidUpdate: 컴포넌트 update가 dom에 적용되고 난 직 후 호출</p>

<h4 id="상태변경">상태변경</h4>

<p><img src="https://nhnent.dooray.com/files/1885919025498668809" alt="새 파일 2017-02-05_5.jpg" />
속성변경과 비슷한 생명 주기.
속성을 받는 함수인 componentWillReceiveProps 함수가 없다.
상태변경이 속성에 영향을 끼치진 않는다.</p>

<h3 id="수명주기-함수의-실제활용-데이터-가져오기">수명주기 함수의 실제활용: 데이터 가져오기</h3>

<pre><code>class ContactsAppContainer extends Component {
    constructor() {
        super();
        this.state = {
            contacts: []
        };
    }

//mount 생명주기 함수
//초기 랜더링 직후 dom 생성 후 호출
    componentDidMount() {
        fetch('./contacts.json')
        .then((response) =&gt; response.json())
        .then((responseData) =&gt; {
            this.setState({contacts: responseData})
        })
        .catch((error) =&gt; {
            console.log('error', error);
        })
    }

    render() {
        return (
            &lt;ContactsApp contacts={this.state.contacts}/&gt;
        )
    }
}
</code></pre>

<h4 id="참고">참고</h4>

<p>폴리필(polyfill): 특정 기능을 지원하지 않는 브라우저에서 해당 기능을 이용 할 수 있게 해주는 브라우저 대체 기능.
해당 절에서는 whatwg-fetch라를 폴리필을 이용해 크롬/파폭 이외에서 fetch기능을 이용 할 수있게 했다. (원래는 window.fetch)</p>

<h3 id="불변성에-대한-개요-박병준-page-90-99">불변성에 대한 개요 (@박병준, Page 90-99)</h3>

<h4 id="불변성-immutability-객체를-변경하지-않고-대체하는-것">불변성(Immutability) : 객체를 변경하지 않고 대체하는 것</h4>

<ul>
<li>this.state를 직접 조작하는 것(mutable)은 리액트의 상태 관리를 우회하여 리액트의 패러다임을 위반하게 됨.</li>
<li>리액트는 setState 메서드를 이용한 불변성을 지향함. (immutable)</li>
<li>성능에도 영향 : 객체가 변경된 경우 편집된게 아니라 대체된 것이므로 훨씬 빠르게 객체 비교가 가능. ex) object1 == object2</li>
<li>변경전 값을 관리하기에도 용이</li>
</ul>

<h4 id="일반-자바스크립트에서의-불변성">일반 자바스크립트에서의 불변성</h4>

<ul>
<li>일반 자바스크립트에서도 불변성은 가능하지만 표준은 아님.</li>
<li>주의하지 않으면 객체가 대체되지 않고 의도치 않게 변형될 수 있기 때문.</li>
</ul>

<h4 id="주의할점">주의할점</h4>

<ul>
<li>잘못된 예</li>
</ul>

<pre><code class="language-jsx">let updatedPassengers = this.state.passengers;
updatePassengers.push('Mitchell, Vincent M.');
this.setState({passengers.updatePassengers});
</code></pre>

<ul>
<li>올바른 예</li>
</ul>

<pre><code class="language-jsx">let updatePassengers = this.state.passengers.concat('Mitchell, Vincent M.');
this.setState({passengers.updatePassengers});
</code></pre>

<ul>
<li>[잘못된 예] 코드의 문제는 자바스크립트에서 객체와 배열은 참조로 전달된다는 점.</li>
<li>비파괴 메서드(map, filter, concar 등)를 이용하여 새로운 객체를 만들어야 함.</li>
<li>다른 대안으로 Object.assign 을 이용하여 새로운 객체를 생성하는 방법도 있음.</li>
<li><a href="https://msdn.microsoft.com/ko-kr/library/dn858229(v=vs.94).aspx">MSDN : Obejct.assign</a></li>
</ul>

<pre><code class="language-jsx">let updatedPassengers = Object.assign({}, this.state.passengers);
updatePassengers.push('Mitchell, Vincent M.');
this.setState({passengers.updatePassengers});
</code></pre>

<h4 id="중첩된-객체">중첩된 객체</h4>

<ul>
<li>사실 위에서 설명한 비파괴 메서드나 Object.assign 은 깊은 복사를 하지 않음.</li>

<li><p>즉, 새로 반환되는 객체의 중첩된 객체와 배열은 이전 객체에 있던 동일한 중첩된 객체와 배열을 참조.</p></li>

<li><p>When</p></li>
</ul>

<pre><code class="language-jsx">let originalTicket = { 
    company: 'Delta',
    flightNo: '0990', 
    departure: {
        airport: 'LAS',
        time: '2016-08-21T10:00:00.000Z'
    },
    arrival: {
        airport: 'MIA', 
        time: '206-08-21T14:00:00.000Z'
    }
};
</code></pre>

<ul>
<li>Do</li>
</ul>

<pre><code class="language-jsx">let newTicket = Object.assign({}, originalTicket, {flightNo '5690'});
</code></pre>

<ul>
<li>Then</li>
</ul>

<pre><code class="language-jsx">originalTicket
&gt; Object {company: &quot;Delta&quot;, filghtNo: '0990', departure:Object, arrival:Object}
    &gt; arrival: Object
        airport: &quot;MCO&quot;
        time: &quot;206-08-21T14:00:00.000Z&quot;
&gt; Object {company: &quot;Delta&quot;, filghtNo: '0990', departure:Object, arrival:Object}
    &gt; arrival: Object
        airport: &quot;MCO&quot;
        time: &quot;206-08-21T14:00:00.000Z&quot;
</code></pre>

<p>&ndash;&gt; 리액트에서 변화감지 못함</p>

<ul>
<li>깊은 복사를 만드는 방법이 있긴 하지만 성능면에서 부담이 있고 경우에 따라 깊은 복사가 불가능할 수 있음.</li>
</ul>

<h4 id="리액트-불변성-도우미-react-immutablility-helper">리액트 불변성 도우미(React Immutablility Helper)</h4>

<ul>
<li><a href="https://facebook.github.io/react/docs/update.html">Facebook Immutablility Helper</a></li>
<li>리액트의 애드온 패키지에는 update 라는 Immutablility Helper 가 있음.</li>
</ul>

<pre><code class="language-jsx">let newTicket = update(originalTicket, {
                    arrival: {
                        airport: {$set: 'MCO'}
                    }
                });
</code></pre>

<pre><code class="language-jsx">let newTicket = update(originalTicket, {
                    codeshare: {
                        0: {$set: {company: 'AZ', flightNo: '7320'}}
                    }
                });
</code></pre>

<ul>
<li>{$push: array} push() all the items in array on the target.</li>
<li>{$unshift: array} unshift() all the items in array on the target.</li>
<li>{$splice: array of arrays} for each item in arrays call splice() on the target with the parameters provided by the item.</li>
<li>{$set: any} replace the target entirely.</li>
<li>{$merge: object} merge the keys of object with the target.</li>
<li>{$apply: function} passes in the current value to the function and updates it with the new returned value.</li>
</ul>

<h3 id="칸반-앱-약간의-복잡성-추가">칸반 앱 : 약간의 복잡성 추가</h3>

</div>

        <footer class="post-footer clearfix">
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?text=%ec%bb%b4%ed%8f%ac%eb%84%8c%ed%8a%b8%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%20%ea%b5%ac%ec%b6%95&url=https%3a%2f%2fne-mis.github.io%2fstudy-react.js%2f2017%2f02%2f09%2f3.chapter%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fne-mis.github.io%2fstudy-react.js%2f2017%2f02%2f09%2f3.chapter%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        

        
            <a class="icon-google-plus" href="https://plus.google.com/share?url=https%3a%2f%2fne-mis.github.io%2fstudy-react.js%2f2017%2f02%2f09%2f3.chapter%2f"
              onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
              <i class="fa fa-google-plus"></i>
                <span class="hidden">Google+</span>
            </a>
        
    </div>
</footer>

        
    <div class="comments">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'XXX';
    var disqus_identifier = 'https:\/\/ne-mis.github.io\/study-react.js\/2017\/02\/09\/3.chapter\/';
    var disqus_title = '컴포넌트를 이용한 애플리케이션 구축';
    var disqus_url = 'https:\/\/ne-mis.github.io\/study-react.js\/2017\/02\/09\/3.chapter\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="React.js 스터디" href="https://ne-mis.github.io/study-react.js/">React.js 스터디</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2017 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="https://ne-mis.github.io/study-react.js/js/jquery-1.11.3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
        <script src="https://ne-mis.github.io/study-react.js/js/jquery.fitvids.js"></script>
        <script src="https://ne-mis.github.io/study-react.js/js/scripts.js"></script>
    </body>
</html>

